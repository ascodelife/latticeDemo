{"version":3,"sources":["components/header/Header.js","actions/tagActions.js","constants/tagsConstants.js","components/tagSidebar/TagsTree.js","canvas/lattice.js","components/tagSidebar/Lattice.js","data/step1Data.js","data/step2Data.js","data/step3Data.js","data/posData.js","components/tagSidebar/TagSidebar.js","components/fileBar/SplitBar.js","components/fileBar/FileBar.js","components/fileBar/File.js","components/fileBar/Folder.js","actions/fileActions.js","constants/fielConstants.js","screens/FilesScreen.js","actions/controllerActions.js","constants/controllerConstants.js","components/controlSidebar/TagList.js","components/controlSidebar/ControlSidebar.js","App.js","serviceWorker.js","store.js","reducers/controllerReducers.js","reducers/tagReducers.js","reducers/fileReducers.js","index.js"],"names":["Header","props","handlePrimaryClick","current","className","to","LeftOutlined","type","onClick","setSeletedTag","tag","dispatch","payload","TagsTree","selectedKeys","onSelect","treeData","selectedFileTags","TreeNode","Tree","defaultExpandAll","showIcon","switcherIcon","DownOutlined","renderTreeNodes","map","item","key","title","includes","icon","TagOutlined","children","renderLattice","element","clickCallback","mouseoverCallback","mouseoutCallback","width","clientHeight","height","clientWidth","stage","Konva","Stage","container","layer","Layer","text","Text","x","y","fontFamily","fontSize","fill","add","posData","F1","F2","F11","F12","F21","F22","relationData","tweens","Map","drawHalf","ctx","shape","fillStyle","upper","beginPath","angle","Math","PI","arc","stroke","closePath","fillStrokeShape","Object","keys","forEach","tagName","node","info","Shape","sceneFunc","drawAttrObjNode","drawObjNode","Circle","radius","strokeWidth","drawSimpleNode","set","Tween","duration","scaleX","scaleY","easing","Easings","EaseInOut","on","get","play","reverse","x1","y1","x2","y2","line","Line","points","lineCap","lineJoin","drawLine","Lattice","arrowStyle","handleNodeClick","handleNodeMouseover","handleNodeMouseout","nodeInfo","ref","useRef","useState","setElement","useEffect","style","src","alt","metaData","tags","name","files","f1","f2","f3","f4","f5","f6","f7","levelData","parents","No","intents","top","left","withRouter","carousel","setSelectedKeys","checked","setChecked","setNodeInfo","selectedTag","useSelector","state","step","selectedFile","step1Data","step2Data","step3Data","useDispatch","location","pathname","split","slice","index","innerSlider","slickGoTo","effect","dots","length","selectedNodes","history","push","onChange","SplitBar","isUnfold","RightOutlined","FileBar","setisUnfold","React","Children","child","File","file","tabIndex","onFocus","onBlur","Folder","folder","onDoubleClick","setSeletedFile","FilesScreen","match","params","renderFolder","typeName","arr","folderName","fileName","setCurrentStep","dispath","Cookie","JSON","stringify","TagList","data","size","header","bordered","dataSource","renderItem","Item","TagsOutlined","color","ControlSidebar","Step","Steps","placement","closable","onClose","visible","afterChange","step1","step2","App","setiVisible","exact","path","component","Boolean","window","hostname","initialState","getJSON","reducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.1c8111cb.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"antd\";\r\nimport { LeftOutlined } from \"@ant-design/icons\";\r\nfunction Header(props) {\r\n  const { handlePrimaryClick, current } = props;\r\n  return (\r\n    <div className=\"flex-contain\">\r\n      <Link to=\"/\">\r\n        <LeftOutlined /> 回到首页\r\n      </Link>\r\n      <h3>{`示例程序-当前步骤${current + 1}`}</h3>\r\n      <Button type=\"primary\" onClick={handlePrimaryClick}>\r\n        打开控制面板\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import { SET_SELECT_TAG } from \"../constants/tagsConstants\";\r\n\r\nconst setSeletedTag = (tag) => (dispatch) => {\r\n    dispatch({type:SET_SELECT_TAG,payload:tag})\r\n};\r\n\r\nexport { setSeletedTag };\r\n","export const SET_SELECT_TAG = \"SET_SELECT_TAG\";\r\n","import React from \"react\";\r\nimport { DownOutlined, TagOutlined } from \"@ant-design/icons\";\r\nimport { Tree } from \"antd\";\r\n\r\nfunction TagsTree(props) {\r\n  const { selectedKeys, onSelect, treeData, selectedFileTags } = props;\r\n\r\n  const { TreeNode } = Tree;\r\n\r\n  function renderTreeNodes(treeData) {\r\n    return treeData.map((item) => {\r\n      return (\r\n        <TreeNode\r\n          key={item.key}\r\n          title={\r\n            <span\r\n              className={`padding ${\r\n                selectedFileTags && selectedFileTags.includes(item.title)\r\n                  ? \"solid\"\r\n                  : \"\"\r\n              }`}\r\n            >\r\n              {item.title}\r\n            </span>\r\n          }\r\n          icon={<TagOutlined />}\r\n        >\r\n          {item.children ? renderTreeNodes(item.children) : \"\"}\r\n        </TreeNode>\r\n      );\r\n    });\r\n  }\r\n  return (\r\n    <div>\r\n      <Tree\r\n        selectedKeys={selectedKeys}\r\n        defaultExpandAll\r\n        showIcon\r\n        switcherIcon={<DownOutlined />}\r\n        onSelect={onSelect}\r\n      >\r\n        {renderTreeNodes(treeData)}\r\n      </Tree>\r\n    </div>\r\n  );\r\n}\r\nexport default TagsTree;\r\n","import Konva from \"konva\";\r\nfunction renderLattice(\r\n  element,\r\n  clickCallback,\r\n  mouseoverCallback,\r\n  mouseoutCallback\r\n) {\r\n  const width = element.clientHeight;\r\n  const height = element.clientWidth;\r\n\r\n  const stage = new Konva.Stage({\r\n    container: element,\r\n    width,\r\n    height,\r\n  });\r\n\r\n  const layer = new Konva.Layer();\r\n\r\n  const text = new Konva.Text({\r\n    x: 0,\r\n    y: 0,\r\n    fontFamily: \"Calibri\",\r\n    fontSize: 16,\r\n    text: \"\",\r\n    fill: \"black\",\r\n  });\r\n  layer.add(text);\r\n\r\n  const posData = {\r\n    \"1\": {\r\n      x: 0.5,\r\n      y: 0.07,\r\n      type: \"2\",\r\n    },\r\n    F1: {\r\n      x: 0.25,\r\n      y: 0.18,\r\n      type: \"0\",\r\n    },\r\n    F2: {\r\n      x: 0.75,\r\n      y: 0.18,\r\n      type: \"0\",\r\n    },\r\n    F11: {\r\n      x: 0.1,\r\n      y: 0.33,\r\n      type: \"0\",\r\n    },\r\n    F12: {\r\n      x: 0.3,\r\n      y: 0.33,\r\n      type: \"0\",\r\n    },\r\n    F21: {\r\n      x: 0.625,\r\n      y: 0.33,\r\n      type: \"0\",\r\n    },\r\n    F22: {\r\n      x: 0.875,\r\n      y: 0.33,\r\n      type: \"0\",\r\n    },\r\n    \"8\": {\r\n      x: 0.5,\r\n      y: 0.48,\r\n      type: \"2\",\r\n    },\r\n    \"9\": {\r\n      x: 0.25,\r\n      y: 0.63,\r\n      type: \"1\",\r\n    },\r\n    \"10\": {\r\n      x: 0.5,\r\n      y: 0.63,\r\n      type: \"2\",\r\n    },\r\n    \"11\": {\r\n      x: 0.375,\r\n      y: 0.78,\r\n      type: \"1\",\r\n    },\r\n    \"12\": {\r\n      x: 0.625,\r\n      y: 0.78,\r\n      type: \"1\",\r\n    },\r\n    \"13\": {\r\n      x: 0.5,\r\n      y: 0.97,\r\n      type: \"2\",\r\n    },\r\n  };\r\n\r\n  const relationData = {\r\n    \"1\": [\"F1\", \"F2\"],\r\n    F1: [\"F11\", \"F12\", \"8\"],\r\n    F2: [\"F21\", \"F22\"],\r\n    F11: [\"10\"],\r\n    F12: [\"9\"],\r\n    F21: [\"8\"],\r\n    F22: [\"12\"],\r\n    \"8\": [\"9\", \"10\"],\r\n    \"9\": [\"11\"],\r\n    \"10\": [\"11\", \"12\"],\r\n    \"11\": [\"13\"],\r\n    \"12\": [\"13\"],\r\n  };\r\n  const tweens = new Map();\r\n  Object.keys(posData).forEach((tagName) => {\r\n    let { x, y, type } = posData[tagName];\r\n    x *= height;\r\n    y *= width;\r\n    let node = null;\r\n    const info = new Konva.Text({\r\n      x: x + 0.04 * height,\r\n      y: y - 0.03 * height,\r\n      fontFamily: \"Calibri\",\r\n      fontSize: 18,\r\n      text: tagName,\r\n      fill: \"red\",\r\n    });\r\n    switch (type) {\r\n      case \"0\":\r\n        node = drawAttrObjNode(x, y);\r\n        break;\r\n      case \"1\":\r\n        node = drawObjNode(x, y);\r\n        break;\r\n      default:\r\n        node = drawSimpleNode(x, y);\r\n    }\r\n\r\n    layer.add(node);\r\n    layer.add(info);\r\n    tweens.set(\r\n      node,\r\n      new Konva.Tween({\r\n        node,\r\n        duration: 0.1,\r\n        scaleX: 1.5,\r\n        scaleY: 1.5,\r\n        easing: Konva.Easings.EaseInOut,\r\n      })\r\n    );\r\n\r\n    node.on(\"click\", function () {\r\n      if (typeof clickCallback === \"function\") {\r\n        clickCallback(tagName);\r\n      }\r\n    });\r\n\r\n    node.on(\"mouseover\", function () {\r\n      tweens.get(node).play();\r\n      if (typeof mouseoverCallback === \"function\") {\r\n        mouseoverCallback(tagName);\r\n      }\r\n    });\r\n\r\n    node.on(\"mouseout\", function () {\r\n      tweens.get(node).reverse();\r\n      if (typeof mouseoutCallback === \"function\") {\r\n        mouseoutCallback(tagName);\r\n      }\r\n    });\r\n  });\r\n\r\n  Object.keys(relationData).forEach((tagName) => {\r\n    const { x: x1, y: y1 } = posData[tagName];\r\n    relationData[tagName].forEach((item) => {\r\n      const { x: x2, y: y2 } = posData[item];\r\n      const line = drawLine(x1, y1, x2, y2);\r\n      layer.add(line);\r\n    });\r\n  });\r\n\r\n  stage.add(layer);\r\n\r\n  function drawHalf(ctx, shape, fillStyle, upper) {\r\n    ctx.beginPath();\r\n    let angle = [];\r\n    if (upper) {\r\n      angle = [1 * Math.PI, 2 * Math.PI];\r\n    } else {\r\n      angle = [0, 1 * Math.PI];\r\n    }\r\n    ctx.arc(0, 0, 0.03 * height, ...angle);\r\n    ctx.fillStyle = fillStyle;\r\n    ctx.stroke();\r\n    ctx.fill();\r\n    ctx.closePath();\r\n    ctx.fillStrokeShape(shape);\r\n  }\r\n\r\n  function drawAttrObjNode(x, y) {\r\n    const node = new Konva.Shape({\r\n      x,\r\n      y,\r\n      sceneFunc: function (ctx, shape) {\r\n        drawHalf(ctx, shape, \"blue\", true);\r\n        drawHalf(ctx, shape, \"black\", false);\r\n      },\r\n    });\r\n    return node;\r\n  }\r\n  function drawObjNode(x, y) {\r\n    const node = new Konva.Shape({\r\n      x,\r\n      y,\r\n      sceneFunc: function (ctx, shape) {\r\n        drawHalf(ctx, shape, \"white\", true);\r\n        drawHalf(ctx, shape, \"black\", false);\r\n      },\r\n    });\r\n    return node;\r\n  }\r\n  function drawSimpleNode(x, y) {\r\n    const node = new Konva.Circle({\r\n      x,\r\n      y,\r\n      radius: 0.03 * height,\r\n      fill: \"white\",\r\n      stroke: \"black\",\r\n      strokeWidth: 1,\r\n    });\r\n    return node;\r\n  }\r\n\r\n  function drawLine(x1, y1, x2, y2) {\r\n    const line = new Konva.Line({\r\n      points: [\r\n        x1 * height,\r\n        y1 * height + 0.03 * height,\r\n        x2 * height,\r\n        y2 * height - 0.03 * height,\r\n      ],\r\n      stroke: \"black\",\r\n      strokeWidth: 2,\r\n      lineCap: \"round\",\r\n      lineJoin: \"round\",\r\n    });\r\n    return line;\r\n  }\r\n}\r\n\r\nexport default renderLattice;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport renderLattice from \"../../canvas/lattice\";\r\nfunction Lattice(props) {\r\n  const arrowStyle = { ...props.posData };\r\n  const {\r\n    handleNodeClick,\r\n    handleNodeMouseover,\r\n    handleNodeMouseout,\r\n    nodeInfo,\r\n  } = props;\r\n  const ref = useRef();\r\n\r\n  const [element, setElement] = useState();\r\n\r\n  useEffect(() => {\r\n    setElement(ref.current);\r\n    return () => {\r\n      //\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"lattice\">\r\n      <img\r\n        className=\"arrow\"\r\n        style={arrowStyle}\r\n        width=\"10%\"\r\n        src=\"/images/arrow.png\"\r\n        alt=\"箭头\"\r\n      />\r\n      <div ref={ref}>\r\n        {element\r\n          ? renderLattice(\r\n              element,\r\n              handleNodeClick,\r\n              handleNodeMouseover,\r\n              handleNodeMouseout\r\n            )\r\n          : null}\r\n        {/* <img src=\"/images/lattice.png\" width=\"100%\" alt=\"概念格\" /> */}\r\n      </div>\r\n      <div>{nodeInfo}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lattice;\r\n","const metaData = {\r\n  tags: {\r\n    F1: { name: \"F1标签\", files: [\"f1\", \"f4\", \"f5\"] },\r\n    F11: { name: \"F11标签\", files: [\"f1\", \"f2\", \"f3\"] },\r\n    F12: { name: \"F12标签\", files: [\"f2\", \"f4\", \"f5\", \"f6\"] },\r\n    F2: { name: \"F2标签\", files: [\"f2\", \"f4\", \"f6\"] },\r\n    F21: { name: \"F21标签\", files: [\"f1\", \"f2\", \"f4\", \"f6\"] },\r\n    F22: { name: \"F22标签\", files: [\"f1\", \"f7\"] },\r\n  },\r\n  files: {\r\n    f1: { name: \"f1\", tags: [\"F1\", \"F11\", \"F21\", \"F22\"] },\r\n    f2: { name: \"f2\", tags: [\"F11\", \"F12\", \"F2\", \"F21\"] },\r\n    f3: { name: \"f3\", tags: [\"F11\"] },\r\n    f4: { name: \"f4\", tags: [\"F1\", \"F12\", \"F2\", \"F21\"] },\r\n    f5: { name: \"f5\", tags: [\"F1\", \"F12\"] },\r\n    f6: { name: \"f6\", tags: [\"F12\", \"F2\", \"F21\"] },\r\n    f7: { name: \"f7\", tags: [\"F22\"] },\r\n  },\r\n};\r\n\r\nconst treeData = [\r\n  {\r\n    title: \"F1\",\r\n    key: \"F1\",\r\n    children: [],\r\n  },\r\n  {\r\n    title: \"F11\",\r\n    key: \"F11\",\r\n    children: [],\r\n  },\r\n  {\r\n    title: \"F12\",\r\n    key: \"F12\",\r\n    children: [],\r\n  },\r\n  {\r\n    title: \"F2\",\r\n    key: \"F2\",\r\n    children: [],\r\n  },\r\n  {\r\n    title: \"F21\",\r\n    key: \"F21\",\r\n    children: [],\r\n  },\r\n  {\r\n    title: \"F22\",\r\n    key: \"F22\",\r\n    children: [],\r\n  },\r\n];\r\n\r\nconst levelData = null;\r\n\r\nexport default { metaData, treeData, levelData };\r\n","const metaData = {\r\n    tags: {\r\n      F1: {\r\n        name: \"F1标签\",\r\n        files: [\"f1\", \"f2\", \"f3\", \"f4\", \"f5\", \"f6\"],\r\n      },\r\n      F11: { name: \"F11标签\", files: [\"f1\", \"f2\", \"f3\"] },\r\n      F12: {name: \"F12标签\", files: [\"f2\", \"f4\", \"f5\", \"f6\"] },\r\n      F2: {\r\n        name: \"F2标签\",\r\n        files: [\"f1\", \"f2\", \"f4\", \"f6\", \"f7\"],\r\n      },\r\n      F21: { name: \"F21标签\", files: [\"f1\", \"f2\", \"f4\", \"f6\"] },\r\n      F22: { name: \"F22标签\", files: [\"f1\", \"f7\"] },\r\n    },\r\n    files: {\r\n      f1: { name: \"f1\", tags: [\"F1\", \"F11\", \"F2\", \"F21\", \"F22\"] },\r\n      f2: {  name: \"f2\", tags: [\"F1\", \"F11\", \"F12\", \"F2\", \"F21\"] },\r\n      f3: {  name: \"f3\", tags: [\"F1\", \"F11\"] },\r\n      f4: {  name: \"f4\", tags: [\"F1\", \"F12\", \"F2\", \"F21\"] },\r\n      f5: {  name: \"f5\", tags: [\"F1\", \"F12\"] },\r\n      f6: {  name: \"f6\", tags: [\"F1\", \"F12\", \"F2\", \"F21\"] },\r\n      f7: {  name: \"f7\", tags: [\"F2\", \"F22\"] },\r\n    },\r\n  };\r\n\r\nconst treeData = [\r\n  {\r\n    title: \"F1\",\r\n    key: \"F1\",\r\n    children: [\r\n      {\r\n        title: \"F11\",\r\n        key: \"F11\",\r\n        children: [],\r\n      },\r\n      {\r\n        title: \"F12\",\r\n        key: \"F12\",\r\n        children: [],\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"F2\",\r\n    key: \"F2\",\r\n    children: [\r\n      {\r\n        title: \"F21\",\r\n        key: \"F21\",\r\n        children: [],\r\n      },\r\n      {\r\n        title: \"F22\",\r\n        key: \"F22\",\r\n        children: [],\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nconst levelData = {\r\n  F1: {\r\n    name: \"F1\",\r\n    children: [\"F11\", \"F12\"],\r\n    files: [\"f1\", \"f2\", \"f3\", \"f4\", \"f5\", \"f6\"],\r\n  },\r\n  F2: {\r\n    name: \"F2\",\r\n    children: [\"F21\", \"F22\"],\r\n    files: [\"f1\", \"f2\", \"f4\", \"f6\", \"f7\"],\r\n  },\r\n  F11: {\r\n    name: \"F11\",\r\n    parents: [\"F1\"],\r\n    files: [\"f1\", \"f2\", \"f3\"],\r\n  },\r\n  F12: {\r\n    name: \"F12\",\r\n    parents: [\"F1\"],\r\n    files: [\"f2\", \"f4\", \"f5\", \"f6\"],\r\n  },\r\n  F21: {\r\n    name: \"F21\",\r\n    parents: [\"F2\"],\r\n    files: [\"f1\", \"f2\", \"f4\", \"f6\"],\r\n  },\r\n  F22: {\r\n    name: \"F22\",\r\n    parents: [\"F2\"],\r\n    files: [\"f1\", \"f7\"],\r\n  },\r\n};\r\n\r\nexport default  { metaData, treeData, levelData };\r\n","const metaData = {\r\n  tags: {\r\n    \"1\": {\r\n      name: \"1号节点\",\r\n      files: [\"f1\", \"f2\", \"f3\", \"f4\", \"f5\", \"f6\", \"f7\"],\r\n    },\r\n    F1: {\r\n      name: \"F1标签\",\r\n      files: [\"f1\", \"f2\", \"f3\", \"f4\", \"f5\", \"f6\"],\r\n    },\r\n    F11: { name: \"F11标签\", files: [\"f1\", \"f2\", \"f3\"] },\r\n    F12: { name: \"F12标签\", files: [\"f2\", \"f4\", \"f5\", \"f6\"] },\r\n    F2: {\r\n      name: \"F2标签\",\r\n      files: [\"f1\", \"f2\", \"f4\", \"f6\", \"f7\"],\r\n    },\r\n    F21: { name: \"F21标签\", files: [\"f1\", \"f2\", \"f4\", \"f6\"] },\r\n    F22: { name: \"F22标签\", files: [\"f1\", \"f7\"] },\r\n    \"8\": { name: \"8号节点\", files: [\"f1\", \"f2\", \"f4\", \"f6\"] },\r\n    \"9\": { name: \"9号节点\", files: [\"f2\", \"f4\", \"f6\"] },\r\n    \"10\": { name: \"10号节点\", files: [\"f1\", \"f2\"] },\r\n    \"11\": { name: \"11号节点\", files: [\"f2\"] },\r\n    \"12\": { name: \"12号节点\", files: [\"f1\"] },\r\n    \"13\": { name: \"13号节点\", files: [] },\r\n  },\r\n  files: {\r\n    f1: { name: \"f1\", tags: [\"F1\", \"F11\", \"F2\", \"F21\", \"F22\"] },\r\n    f2: { name: \"f2\", tags: [\"F1\", \"F11\", \"F12\", \"F2\", \"F21\"] },\r\n    f3: { name: \"f3\", tags: [\"F1\", \"F11\"] },\r\n    f4: { name: \"f4\", tags: [\"F1\", \"F12\", \"F2\", \"F21\"] },\r\n    f5: { name: \"f5\", tags: [\"F1\", \"F12\"] },\r\n    f6: { name: \"f6\", tags: [\"F1\", \"F12\", \"F2\", \"F21\"] },\r\n    f7: { name: \"f7\", tags: [\"F2\", \"F22\"] },\r\n  },\r\n};\r\n\r\nconst treeData = [\r\n  {\r\n    title: \"F1\",\r\n    key: \"F1\",\r\n    children: [\r\n      {\r\n        title: \"F11\",\r\n        key: \"F11\",\r\n        children: [],\r\n      },\r\n      {\r\n        title: \"F12\",\r\n        key: \"F12\",\r\n        children: [],\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"F2\",\r\n    key: \"F2\",\r\n    children: [\r\n      {\r\n        title: \"F21\",\r\n        key: \"F21\",\r\n        children: [],\r\n      },\r\n      {\r\n        title: \"F22\",\r\n        key: \"F22\",\r\n        children: [],\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nconst levelData = {\r\n  \"1\": {\r\n    name: \"1号节点\",\r\n    No: \"1\",\r\n    children: [\"F1\", \"F2\"],\r\n    files: [\"f1\", \"f2\", \"f3\", \"f4\", \"f5\", \"f6\", \"f7\"],\r\n    intents: [],\r\n  },\r\n  F1: {\r\n    name: \"F1\",\r\n    No: \"2\",\r\n    parents: [\"1\"],\r\n    children: [\"F11\", \"F12\", \"8\"],\r\n    files: [\"f1\", \"f2\", \"f3\", \"f4\", \"f5\", \"f6\"],\r\n    intents: [\"F1\"],\r\n  },\r\n  F2: {\r\n    name: \"F2\",\r\n    No: \"3\",\r\n    parents: [\"1\"],\r\n    children: [\"F21\", \"F22\"],\r\n    files: [\"f1\", \"f2\", \"f4\", \"f6\", \"f7\"],\r\n    intents: [\"F2\"],\r\n  },\r\n  F11: {\r\n    name: \"F11\",\r\n    No: \"4\",\r\n    parents: [\"F1\"],\r\n    children: [\"10\"],\r\n    files: [\"f1\", \"f2\", \"f3\"],\r\n    intents: [\"F11\"],\r\n  },\r\n  F12: {\r\n    name: \"F12\",\r\n    No: \"5\",\r\n    parents: [\"F1\"],\r\n    children: [\"9\"],\r\n    files: [\"f2\", \"f4\", \"f5\", \"f6\"],\r\n    intents: [\"F12\"],\r\n  },\r\n  F21: {\r\n    name: \"F21\",\r\n    No: \"6\",\r\n    parents: [\"F2\"],\r\n    children: [\"8\"],\r\n    files: [\"f1\", \"f2\", \"f4\", \"f6\"],\r\n    intents: [\"F21\"],\r\n  },\r\n  F22: {\r\n    name: \"F22\",\r\n    No: \"7\",\r\n    parents: [\"F2\"],\r\n    children: [\"12\"],\r\n    files: [\"f1\", \"f7\"],\r\n    intents: [\"F22\"],\r\n  },\r\n  \"8\": {\r\n    name: \"8号节点\",\r\n    No: \"8\",\r\n    parents: [\"F1\", \"F21\"],\r\n    children: [\"9\", \"10\"],\r\n    files: [\"f1\", \"f2\", \"f4\", \"f6\"],\r\n    intents: [\"F1\", \"F2\", \"F21\"],\r\n  },\r\n  \"9\": {\r\n    name: \"9号节点\",\r\n    No: \"9\",\r\n    parents: [\"F12\", \"8\"],\r\n    children: [\"11\"],\r\n    files: [\"f2\", \"f4\", \"f6\"],\r\n    intents: [\"F1\", \"F2\", \"F12\", \"F21\"],\r\n  },\r\n  \"10\": {\r\n    name: \"10号节点\",\r\n    No: \"10\",\r\n    parents: [\"F11\", \"8\"],\r\n    children: [\"11\", \"12\"],\r\n    files: [\"f1\", \"f2\"],\r\n    intents: [\"F1\", \"F2\", \"F11\", \"F21\"],\r\n  },\r\n  \"11\": {\r\n    name: \"11号节点\",\r\n    No: \"11\",\r\n    parents: [\"9\", \"10\"],\r\n    children: [\"13\"],\r\n    files: [\"f2\"],\r\n    intents: [\"F1\", \"F2\", \"F11\", \"F12\", \"F21\"],\r\n  },\r\n  \"12\": {\r\n    name: \"12号节点\",\r\n    No: \"12\",\r\n    parents: [\"10\", \"F22\"],\r\n    children: [\"13\"],\r\n    files: [\"f1\"],\r\n    intents: [\"F1\", \"F2\", \"F11\", \"F21\", \"F22\"],\r\n  },\r\n  \"13\": {\r\n    name: \"13号节点\",\r\n    No: \"13\",\r\n    parents: [\"11\", \"12\"],\r\n    children: [\"13\"],\r\n    files: [],\r\n    intents: [\"F1\", \"F2\", \"F11\", \"F12\", \"F21\", \"F22\"],\r\n  },\r\n};\r\n\r\nexport default { metaData, treeData, levelData };\r\n","const posData = {\r\n  \"1\": {\r\n    top: \"-5%\",\r\n    left: \"45%\",\r\n  },\r\n  F1: {\r\n    top: \"6%\",\r\n    left: \"20%\",\r\n  },\r\n  F2: {\r\n    top: \"6%\",\r\n    left: \"70%\",\r\n  },\r\n  F11: {\r\n    top: \"21%\",\r\n    left: \"5%\",\r\n  },\r\n  F12: {\r\n    top: \"21%\",\r\n    left: \"25%\",\r\n  },\r\n  F21: {\r\n    top: \"21%\",\r\n    left: \"58%\",\r\n  },\r\n  F22: {\r\n    top: \"21%\",\r\n    left: \"82%\",\r\n  },\r\n  \"8\": {\r\n    top: \"36%\",\r\n    left: \"45%\",\r\n  },\r\n  \"9\": {\r\n    top: \"51%\",\r\n    left: \"20%\",\r\n  },\r\n  \"10\": {\r\n    top: \"51%\",\r\n    left: \"45%\",\r\n  },\r\n  \"11\": {\r\n    top: \"66%\",\r\n    left: \"33%\",\r\n  },\r\n  \"12\": {\r\n    top: \"66%\",\r\n    left: \"58%\",\r\n  },\r\n  \"13\": {\r\n    top: \"85%\",\r\n    left: \"45%\",\r\n  },\r\n};\r\n\r\nexport { posData };\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport { Carousel, Switch } from \"antd\";\r\n\r\nimport { setSeletedTag } from \"../../actions/tagActions\";\r\nimport TagsTree from \"./TagsTree\";\r\nimport Lattice from \"./Lattice\";\r\nimport step1Data from \"../../data/step1Data\";\r\nimport step2Data from \"../../data/step2Data\";\r\nimport step3Data from \"../../data/step3Data\";\r\nimport { posData } from \"../../data/posData\";\r\n\r\nfunction TagSidebar(props) {\r\n  const carousel = useRef();\r\n\r\n  const [selectedKeys, setSelectedKeys] = useState([]);\r\n  const [checked, setChecked] = useState(false);\r\n  const [nodeInfo, setNodeInfo] = useState();\r\n\r\n  const selectedTag = useSelector((state) => state.selectedTag);\r\n  const { current } = useSelector((state) => state.step);\r\n  const selectedFile = useSelector((state) => state.selectedFile);\r\n  const selectedFileTags = selectedFile && selectedFile.tags;\r\n\r\n  const treeData =\r\n    current === 0\r\n      ? step1Data.treeData\r\n      : current === 1\r\n      ? step2Data.treeData\r\n      : step3Data.treeData;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const tagName = props.location.pathname.split(\"/\").slice(-1);\r\n    setSelectedKeys(tagName);\r\n    dispatch(setSeletedTag(tagName));\r\n    return () => {\r\n      //\r\n    };\r\n  }, [dispatch, props.location.pathname]);\r\n\r\n  useEffect(() => {\r\n    if (carousel.current) {\r\n      const index = checked ? 1 : 0;\r\n      carousel.current.innerSlider.slickGoTo(index);\r\n    }\r\n    return () => {};\r\n  }, [checked]);\r\n\r\n  useEffect(() => {\r\n    if (current !== 2) {\r\n      setChecked(0);\r\n    }\r\n    return () => {};\r\n  }, [current]);\r\n\r\n  function handleSelect(selectedKeys, info) {\r\n    if (selectedKeys.length > 0) {\r\n      dispatch(setSeletedTag(info.selectedNodes[0]));\r\n      props.history.push(`/tags/${selectedKeys[0]}`);\r\n    }\r\n  }\r\n\r\n  function handleChange(checked) {\r\n    setChecked(checked);\r\n  }\r\n\r\n  function handleNodeClick(tagName) {\r\n    props.history.push(`/tags/${tagName}`);\r\n  }\r\n\r\n  function handleNodeMouseover(tagName) {\r\n    const info = `指向节点${tagName}:{intents:[${step3Data.levelData[tagName].intents}] ,extents:[${step3Data.levelData[tagName].files}]}`;\r\n    setNodeInfo(info);\r\n  }\r\n  function handleNodeMouseout() {\r\n    const info = \"\";\r\n    setNodeInfo(info);\r\n  }\r\n  return (\r\n    <div className=\"tagSidebar\">\r\n      <div className=\"text-center text-xl\">\r\n        {checked ? \"概念格\" : \"分类标签\"}\r\n      </div>\r\n      <div className=\"grid-container\">\r\n        <Carousel\r\n          ref={carousel}\r\n          className=\"carousel\"\r\n          effect=\"fade\"\r\n          dots={false}\r\n        >\r\n          <TagsTree\r\n            className=\"tagTree\"\r\n            selectedKeys={selectedKeys}\r\n            onSelect={handleSelect}\r\n            treeData={treeData}\r\n            selectedFileTags={selectedFileTags}\r\n          />\r\n          <Lattice\r\n            handleNodeClick={handleNodeClick}\r\n            handleNodeMouseover={handleNodeMouseover}\r\n            handleNodeMouseout={handleNodeMouseout}\r\n            posData={posData[selectedTag]}\r\n            nodeInfo={nodeInfo}\r\n          />\r\n        </Carousel>\r\n        {current === 2 ? (\r\n          <div className=\"action\">\r\n            <span className={checked ? \"\" : \"highlight\"}>标签视图</span>\r\n            <Switch onChange={handleChange} />\r\n            <span className={checked ? \"highlight\" : \"\"}>概念格视图</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(TagSidebar);\r\n","import React from \"react\";\r\nimport {  RightOutlined, DownOutlined } from \"@ant-design/icons\";\r\nimport { Button } from \"antd\";\r\nfunction SplitBar(props) {\r\n  const { info, isUnfold, onClick } = props;\r\n\r\n  return (\r\n    <div className=\"splitBar\">\r\n      <div className=\"flex-contain\">\r\n        <div className=\"arrow\" onClick={onClick}>\r\n          {\r\n            <Button\r\n              type=\"link\"\r\n              icon={isUnfold ? <DownOutlined /> : <RightOutlined />}\r\n            ></Button>\r\n          }\r\n        </div>\r\n        <div className=\"info\">{info}</div>\r\n        <div className=\"line\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SplitBar;\r\n","import React, { useState } from \"react\";\r\nimport SplitBar from \"./SplitBar\";\r\n\r\nfunction FileBar(props) {\r\n  const { info, children } = props;\r\n  const [isUnfold, setisUnfold] = useState(true);\r\n\r\n  function splitBarClickHandle() {\r\n    setisUnfold(!isUnfold);\r\n  }\r\n\r\n  return (\r\n    <div className=\"fileBar\">\r\n      <SplitBar\r\n        onClick={() => splitBarClickHandle()}\r\n        isUnfold={isUnfold}\r\n        info={info}\r\n      />\r\n      <div className={`flex-contain ${isUnfold ? \"\" : \"hidden\"}`}>\r\n        {React.Children.map(children, (child) => (\r\n          <>{child}</>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FileBar;\r\n","import React from \"react\";\r\n\r\nfunction File(props) {\r\n  const {\r\n    file: { name },\r\n    tabIndex,\r\n    onFocus,\r\n    onBlur,\r\n  } = props;\r\n  return (\r\n    <div className=\"file\" tabIndex={tabIndex} onFocus={onFocus} onBlur={onBlur}>\r\n      <img className=\"file-image\" src=\"/images/file.png\" alt={name} />\r\n      <div className=\"file-name\">{name}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default File;\r\n","import React from \"react\";\r\n\r\nfunction Folder(props) {\r\n  const {\r\n    folder: { name },\r\n    tabIndex,\r\n    onDoubleClick,\r\n    onFocus,\r\n    onBlur,\r\n  } = props;\r\n  return (\r\n    <div\r\n      className=\"file\"\r\n      tabIndex={tabIndex}\r\n      onDoubleClick={onDoubleClick}\r\n      onFocus={onFocus}\r\n      onBlur={onBlur}\r\n    >\r\n      <img className=\"file-image\" src=\"/images/folder.png\" alt={name} />\r\n      <div className=\"file-name\">{name}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Folder;\r\n","import { SET_SELECT_FILE } from \"../constants/fielConstants\";\r\n\r\nconst setSeletedFile = (file) => (dispatch) => {\r\n  dispatch({ type: SET_SELECT_FILE, payload: file });\r\n};\r\n\r\nexport { setSeletedFile };\r\n","export const SET_SELECT_FILE = \"SET_SELECT_FILE\";\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport FileBar from \"../components/fileBar/FileBar\";\r\nimport File from \"../components/fileBar/File\";\r\nimport Folder from \"../components/fileBar/Folder\";\r\nimport step1Data from \"../data/step1Data\";\r\nimport step2Data from \"../data/step2Data\";\r\nimport step3Data from \"../data/step3Data\";\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { setSeletedFile } from \"../actions/fileActions\";\r\n\r\nfunction FilesScreen(props) {\r\n  const dispatch = useDispatch();\r\n\r\n  const { current } = useSelector((state) => state.step);\r\n  const { metaData, levelData } =\r\n    current === 0 ? step1Data : current === 1 ? step2Data : step3Data;\r\n  const tagName = props.match.params.tagName;\r\n\r\n  if (!metaData.tags[tagName] && tagName) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  const { name, files } = tagName\r\n    ? metaData.tags[tagName]\r\n    : { name: \"所有\", files: Object.keys(metaData.files) };\r\n\r\n  function renderFolder(type) {\r\n    const typeName = type === 0 ? \"parents\" : \"children\";\r\n    const info = `${name}${type === 0 ? \"父\" : \"子\"}目录`;\r\n    const arr = levelData[tagName][typeName];\r\n    if (arr) {\r\n      return (\r\n        <FileBar info={info}>\r\n          {arr.map((folderName, index) => (\r\n            <Folder\r\n              tabIndex={index + files.length}\r\n              key={folderName}\r\n              folder={levelData[folderName]}\r\n              onDoubleClick={() => props.history.push(`/tags/${folderName}`)}\r\n            ></Folder>\r\n          ))}\r\n        </FileBar>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3 className=\"text-center\">{name}</h3>\r\n      {\r\n        <FileBar info={`${name}的文件（${files.length}）`}>\r\n          {files.map((fileName, index) => (\r\n            <File\r\n              tabIndex={index}\r\n              onFocus={() => dispatch(setSeletedFile(metaData.files[fileName]))}\r\n              onBlur={() => dispatch(setSeletedFile(null))}\r\n              key={metaData.files[fileName].name}\r\n              file={metaData.files[fileName]}\r\n            ></File>\r\n          ))}\r\n        </FileBar>\r\n      }\r\n      {current >= 1 && tagName ? renderFolder(0) : null}\r\n      {current >= 1 && tagName ? renderFolder(1) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FilesScreen;\r\n","import Cookie from \"js-cookie\";\r\nimport { SET_CURRENT_STEP } from \"../constants/controllerConstants\";\r\n\r\nconst setCurrentStep = (current) => (dispath) => {\r\n  dispath({ type: SET_CURRENT_STEP, payload: current });\r\n  Cookie.set(\"current\", JSON.stringify(current));\r\n};\r\n\r\nexport { setCurrentStep };\r\n","export const SET_CURRENT_STEP = \"SET_CURRENT_STEP\";\r\n","import React from \"react\";\r\nimport { List, Tag } from \"antd\";\r\nimport { TagsOutlined } from \"@ant-design/icons\";\r\n\r\nfunction TagList(props) {\r\n  const data = props.data;\r\n  const title = props.title;\r\n  return (\r\n    <List\r\n      className=\"tagList\"\r\n      size=\"small\"\r\n      header={<h3>{title}</h3>}\r\n      bordered\r\n      dataSource={Object.keys(data.tags)}\r\n      renderItem={(item) => (\r\n        <List.Item className=\"grid-container\">\r\n          <div className=\"tag\">\r\n            <TagsOutlined />\r\n            {item}\r\n          </div>\r\n          <div className=\"files\">\r\n            {data.tags[item].files.map((file) => (\r\n              <Tag key={file} color=\"blue\">\r\n                {file}\r\n              </Tag>\r\n            ))}\r\n          </div>\r\n        </List.Item>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default TagList;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Steps, Drawer, Carousel } from \"antd\";\r\nimport { setCurrentStep } from \"../../actions/controllerActions\";\r\nimport TagList from \"../controlSidebar/TagList\";\r\nimport step1 from '../../data/step1Data';\r\nimport step2 from '../../data/step2Data';\r\nfunction ControlSidebar(props) {\r\n  const { Step } = Steps;\r\n  const { current } = useSelector((state) => state.step);\r\n\r\n  const dispatch = useDispatch();\r\n  const carousel = useRef();\r\n\r\n  useEffect(() => {\r\n    if (carousel.current) {\r\n      carousel.current.innerSlider.slickGoTo(current);\r\n    }\r\n    return () => {\r\n      //\r\n    };\r\n  }, [current]);\r\n\r\n  return (\r\n    <Drawer\r\n      className=\"controlSidebar\"\r\n      title=\"控制面板\"\r\n      placement=\"right\"\r\n      closable\r\n      onClose={props.onClose}\r\n      visible={props.visible}\r\n      width=\"50rem\"\r\n    >\r\n      <Steps size=\"small\" current={current}>\r\n        <Step\r\n          className=\"point\"\r\n          title=\"普通文件分类\"\r\n          onClick={() => dispatch(setCurrentStep(0))}\r\n        />\r\n        <Step\r\n          className=\"point\"\r\n          title=\"引入标签层级\"\r\n          onClick={() => dispatch(setCurrentStep(1))}\r\n        />\r\n        <Step\r\n          className=\"point\"\r\n          title=\"概念格\"\r\n          onClick={() => dispatch(setCurrentStep(2))}\r\n        />\r\n      </Steps>\r\n      <Carousel\r\n        ref={carousel}\r\n        className=\"carousel\"\r\n        afterChange={(current) => dispatch(setCurrentStep(current))}\r\n      >\r\n        <TagList data={step1.metaData} title=\"原始标签文件映射表\"/>\r\n        <TagList data={step2.metaData} title=\"引入层级关系后映射表\"/>\r\n        <div>\r\n          <img src=\"/images/lattice.png\" width=\"100%\" alt=\"概念格\"/>\r\n        </div>\r\n      </Carousel>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default ControlSidebar;\r\n","import React, { useState } from \"react\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport \"./App.css\";\nimport Header from \"./components/header/Header\";\nimport TagSidebar from \"./components/tagSidebar/TagSidebar\";\nimport FilesScreen from \"./screens/FilesScreen\";\nimport ControlSidebar from \"./components/controlSidebar/ControlSidebar\";\nimport { useSelector } from \"react-redux\";\n\nfunction App() {\n  const [visible, setiVisible] = useState(false);\n  const { current } = useSelector((state) => state.step);\n\n  function handlePrimaryClick() {\n    setiVisible(true);\n  }\n\n  return (\n    <BrowserRouter>\n      <div className=\"grid-container\">\n        <header className=\"header\">\n          <Header current={current} handlePrimaryClick={handlePrimaryClick} />\n        </header>\n        <aside className=\"aside\">\n          <TagSidebar />\n        </aside>\n        <main className=\"main\">\n          <Switch>\n            <Route exact path=\"/\" component={FilesScreen} />\n            <Route path=\"/tags/:tagName\" component={FilesScreen} />\n            <Redirect to=\"/\" />\n          </Switch>\n        </main>\n        <footer className=\"footer\">底部</footer>\n        <ControlSidebar visible={visible} onClose={() => setiVisible(false)} />\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport Cookie from \"js-cookie\";\r\nimport { stepReducer } from \"./reducers/controllerReducers\";\r\nimport { selectedTagReducer } from \"./reducers/tagReducers\";\r\nimport { selectedFileReducer } from \"./reducers/fileReducers\";\r\n\r\nconst current = Cookie.getJSON(\"current\") || 0;\r\nconst selectedTag = Cookie.getJSON(\"selectedTag\") || null;\r\nconst selectedFile = Cookie.getJSON(\"selectedFile\") || null;\r\n\r\nconst initialState = { step: { current }, selectedTag, selectedFile };\r\nconst reducer = combineReducers({\r\n  step: stepReducer,\r\n  selectedTag: selectedTagReducer,\r\n  selectedFile: selectedFileReducer,\r\n});\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducer,\r\n  initialState,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","import {SET_CURRENT_STEP} from \"../constants/controllerConstants\";\r\n\r\nfunction stepReducer(state = { current: 0 },action) {\r\n    switch (action.type){\r\n        case SET_CURRENT_STEP:\r\n            return {current:action.payload};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport { stepReducer };\r\n","import { SET_SELECT_TAG } from \"../constants/tagsConstants\";\r\n\r\nfunction selectedTagReducer(state=null,action){\r\n    switch (action.type){\r\n        case SET_SELECT_TAG:\r\n            return action.payload\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport {selectedTagReducer}","import { SET_SELECT_FILE } from \"../constants/fielConstants\";\r\n\r\nfunction selectedFileReducer(state=null,action){\r\n    switch (action.type){\r\n        case SET_SELECT_FILE:\r\n            return action.payload\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport {selectedFileReducer}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}